---
# file: roles/common/tasks/main.yaml

- name: Create the packages directory
  local_action: file path="{{ packages_root }}/{{ ansible_distribution | lower }}{{ ansible_distribution_major_version }}" state="directory"
  become: false

- name: Create the /var/tmp/ansible directory
  file:
    path: /var/tmp/ansible
    owner: 'root'
    group: 'root'
    mode: 0700
    state: directory


#   ___  ____       ____  ____  _____ ____ ___ _____ ___ ____
#  / _ \/ ___|     / ___||  _ \| ____/ ___|_ _|  ___|_ _/ ___|
# | | | \___ \ ____\___ \| |_) |  _|| |    | || |_   | | |
# | |_| |___) |_____|__) |  __/| |__| |___ | ||  _|  | | |___
#  \___/|____/     |____/|_|   |_____\____|___|_|   |___\____|
#
- include_tasks: ubuntu.yaml
  when: ansible_distribution == 'Ubuntu'
  tags:
  - unbound

- include_tasks: redhat.yaml
  when: ansible_os_family == 'RedHat'
  tags:
  - unbound


#   ____ ___  __  __ __  __  ___  _   _
#  / ___/ _ \|  \/  |  \/  |/ _ \| \ | |
# | |  | | | | |\/| | |\/| | | | |  \| |
# | |__| |_| | |  | | |  | | |_| | |\  |
#  \____\___/|_|  |_|_|  |_|\___/|_| \_|
#
- name: Install the pyOpenSSL python package
  pip:
    name: pyOpenSSL





- name: Add SSH authorized key
  ansible.posix.authorized_key:
    user: root
    state: present
    key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCr7K8iP6PihNWuX393LbT4sCo3pmfBcS4xPhWUtiZQYQ/46EzFxuvFH7Thf+kt7WOZdat1Vju4fe56gREbbIMIHhlH35xd4FxfuUJ09CLs4j0MW+XKhDxafT2dtUnd2bkQXY14xHTMwGJMY/4T7oIS2hQQBOdkp5VK1yh8Qr/SYZpIdbkccVjemQN+98Vd9RLoLy51lw5PQ9DkZVoypnJ+HcIhfK7cdHuiU+XBMLEd3sAl+gpyn+95KgI5+HO0u0JN4lDw6RlBRWJ1gZ+881z3mo8aJ7x9QCr8GlwZwKa7N6uXajo1ausgGmOlPq6iRn40CJ/Rb7vF8gzOc+uoigVefgydw/DgFXE9pyI1EhdcnPDnPBjVaTIGfXEQKEauTFwn8o46xi8u5b7q6JAq/SIx3llf5VN/d1evDVLxjg4OZAamf+dILxTGhyGm1zz2+rhAkYAVglF+0U7guNc0p3CtOkmCj1UxoGqzyjVBYCfpLFvKvAxrxBe2TKP/Odkoaz8="

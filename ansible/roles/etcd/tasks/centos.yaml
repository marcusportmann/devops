# file: roles/etcd/tasks/centos.yaml

- debug:
    msg: Applying the CentOS-specific etcd configuration

#  _____ ___ ____  _______        ___    _     _       ____   ___  ____ _____ ____
# |  ___|_ _|  _ \| ____\ \      / / \  | |   | |     |  _ \ / _ \|  _ \_   _/ ___|
# | |_   | || |_) |  _|  \ \ /\ / / _ \ | |   | |     | |_) | | | | |_) || | \___ \
# |  _|  | ||  _ <| |___  \ V  V / ___ \| |___| |___  |  __/| |_| |  _ < | |  ___) |
# |_|   |___|_| \_\_____|  \_/\_/_/   \_\_____|_____| |_|    \___/|_| \_\|_| |____/
#
- name: Allow all access to tcp port 2379
  firewalld:
    port: 2379/tcp
    permanent: yes
    state: enabled
    immediate: yes

- name: Allow all access to tcp port 2380
  firewalld:
    port: 2380/tcp
    permanent: yes
    state: enabled
    immediate: yes

- name: Collect the package facts
  package_facts:
    manager: auto

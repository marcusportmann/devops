apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  name: jaeger-gateway
  namespace: istio-system
spec:
  selector:
    istio: ingressgateway
  servers:
	- port:
			number: 15032
			name: https-jaeger
			protocol: HTTPS
		hosts:
		- "*"
		tls:
			mode: SIMPLE
			credentialName: telemetry-gateway-cert
---
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: jaeger-vs
  namespace: istio-system
spec:
  hosts:
	- "*"
  gateways:
	- jaeger-gateway
  http:
	- match:
		- port: 15032
		route:
		- destination:
				host: jaeger-query
				port:
					number: 16686
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: jaeger
  namespace: istio-system
spec:
  host: jaeger
  trafficPolicy:
    tls:
      mode: DISABLE
---
